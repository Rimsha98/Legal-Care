@model IEnumerable<SeedaniLegalCare.Models.Attorney>

@{
    ViewBag.Title = "Attorney_Accounts";
    Layout = "~/Views/Shared/Admin_Layout.cshtml";
    var AttorneyData = (IEnumerable<SeedaniLegalCare.Models.Attorney>)Session["attorney"];
    var AttorneySingle = (SeedaniLegalCare.Models.Attorney)Session["SingleAttorny"];
}

@section  register{

    <link href="~/Content/bootstrap330.min.css" rel="stylesheet" id="bootstrap-css" />
    <script src="~/Scripts/bootstrap330.min.js"></script>
    <script src="~/Scripts/jquery1111.min.js"></script>
    <script src="~/Scripts/jquery191.min.js"></script>


    <style>
        .modal {
            z-index: 9999;
            position: absolute;
            top: 0;
            right: 0;
        }

        .modal-dialog {
            z-index: 99999;
        }

        .table-button {
            border: none;
            background-color: #AFA939;
            color: #fff;
            height: 30px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

            .table-button:hover {
                background-color: #ded871;
            }

            .table-button:focus {
                outline: none;
            }

        #Client-Data thead {
            background-color: #222831;
            font-size: 12px;
            color: #fff;
        }

            #Client-Data thead th {
                text-align: center;
            }

        .user-image {
            height: 35px;
            width: 35px;
            object-fit: cover;
        }

        #Client-Data tbody tr td {
            vertical-align: middle;
            font-size: 12px;
        }

        .approve-icon, .delete-icon, .delete-icon2, .expand-icon {
            background-color: #222831;
            color: #fff;
            font-size: 14px;
            cursor: pointer;
            border: none;
            outline: none;
            border-radius: 50%;
            width: 27px;
            height: 27px;
        }

        .delete-icon, .delete-icon2 {
            background-color: #E82F2F;
            font-size: 15px;
        }

        .expand-icon {
            background-color: #AFA939;
        }

        .delete-icon2 {
            width: 22px;
            height: 22px;
            font-size: 12px;
        }

            .delete-icon:focus, .delete-icon2:focus, .approve-icon:focus, .expand-icon:focus {
                outline: none;
            }


        .approve-icon:hover {
            background-color: #505050;
        }

        .delete-icon:hover, .delete-icon2:hover {
            background-color: #FF7E7E;
        }

        .expand-icon:hover {
            background-color: #ded871;
        }

        .btnn {
            width: 3%;
        }

        #exampleModalCenter, #approverequest, #Expand-Attorney {
            z-index: 9999;
            position: absolute;
            top: 0;
            right: 0;
        }

        .modal-dialog {
            z-index: 99999;
        }

        .pagination {
            margin-right: 15px;
        }

            .pagination > li > a {
                color: #222831 !important;
            }

            .pagination > .active > a, .pagination > .active > span, .pagination > .active > a:hover,
            .pagination > .active > span:hover, .pagination > .active > a:focus, .pagination > .active > span:focus {
                background-color: #AFA939 !important;
                border-color: #AFA939 !important;
                color: #fff !important;
            }

        #attorneymodal-label, .sm-head {
            color: #AFA939;
        }

        #delete {
            background-color: #AFA939 !important;
            border-color: #AFA939 !important;
        }

            #delete:hover {
                background-color: #ded871 !important;
                border-color: #ded871 !important;
            }

        #close:hover {
            color: #fff !important;
        }
    </style>

}

<section>
    <div class="row pb-4" style="background-color: #F8F9FA;">
        <div class="col-md-4 mt-2 mb-2">
            <div class="search-bar">
                <input type="text" placeholder="enter text to search ..." class="float-left" />
                <button type="button" class="float-left search-btn"><i class="fas fa-search"></i></button>
            </div>
        </div>
        <div class="col-md-8 mt-2 mb-2 center">
            <button class="buttons " onclick="location.href='/accounts/client_accounts'">Client Accounts</button>
            <button class="buttons btn1 ml-3">Attorney Accounts</button>
        </div>
    </div>

    <div class="sub-content">
        <div class="container-fluid p-0 m-0">
            <div class="row">
                <div class="col-md-12">
                    <div class="table-responsive">
                        <table id="Client-Data" class="table table-bordred table-striped">
                            <thead>
                            <th>Image</th>
                            <th>Full Name</th>
                            <th>Email</th>
                            <th>Contact</th>
                            <th>Gender</th>
                            <th>City</th>
                            <th>Country</th>
                            <th></th>
                            <th></th>
                            <th></th>
                            </thead>

                            <tbody>
                                <tr>
                                    @foreach (var attorney in Model)
                                    {
                                    <tr id="row_@attorney.Attorney_ID">
                                        <td><img src="~/images/person_1.jpg" class="user-image rounded rounded-circle" /></td>
                                        <td>@attorney.Attorney_Name</td>
                                        <td>@attorney.Attorney_Email</td>
                                        <td>@attorney.Attorney_Number</td>
                                        <td>@attorney.Attorney_Gender</td>
                                        <td>@attorney.Attorney_City</td>
                                        <td>@attorney.Attorney_Country</td>

                                        <td class="btnn"><button class="expand-icon table-button anchorDetail" onclick="javascript:void(0);" data-id="@attorney.Attorney_ID"><i class="fas fa-arrow-up"></i></button></td>
                                        @*<td class="btnn"><button class="expand-icon table-button" data-id="@attorney.Attorney_ID" onclick="ViewPopup(@attorney.Attorney_ID)" title="View Details" data-toggle="modal" data-target="#Expand-Attorney"><i class="fas fa-arrow-up"></i></button></td>*@
                                        @* <td class="btnn">@Html.ActionLink("popup", "attorney_accounts", "accounts", new { id = attorney.Attorney_ID }, null);</td>*@
                                        @*<td class="btnn"><button class="delete-icon" title="Delete" data-toggle="modal" data-target="#exampleModalCenter"><i class="fas fa-times"></i></button></td>*@
                                        <td class="btnn"><button class="delete-icon" onclick="ConfirmDelete(@attorney.Attorney_ID)" title="Delete"><i class="fas fa-times"></i></button></td>
                                        <td class="btnn">
                                            @if (attorney.Block == "1")
                                            {
                                                <button id="ban_@attorney.Attorney_ID" class="approve-icon" title="Unban" onclick="ConfirmUnban(@attorney.Attorney_ID)"><i class="fas fa-ban"></i></button>
                                            }

                                        </td>

                                    </tr>

                                }






                                </tbody>
                            </table>

                            <div class="clearfix"></div>
                            <ul class="pagination pull-right">
                                <li class="disabled"><a href="#"><span class="glyphicon glyphicon-chevron-left"></span></a></li>
                                <li class="active"><a href="#">1</a></li>
                                <li><a href="#">2</a></li>
                                <li><a href="#">3</a></li>
                                <li><a href="#">4</a></li>
                                <li><a href="#">5</a></li>
                                <li><a href="#"><span class="glyphicon glyphicon-chevron-right"></span></a></li>
                            </ul>

                        </div>

                    </div>
                </div>
            </div>

            <div class="modal " id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title float-left text-danger font-weight-bold" id="exampleModalLongTitle">Delete Account</h5>
                            <button class="delete-icon2 float-right" title="Close" data-dismiss="modal"><i class="fas fa-times"></i></button>
                        </div>
                        <div class="modal-body mt-3">
                            <p>Once deleted, the account cannot be recovered.</p>
                            <p>Are you sure you want to delete this account?</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" id="close" data-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-primary" id="delete" onclick="DeleteAttorney()">Delete</button>
                        </div>
                    </div>
                </div>
            </div>
            <input type="hidden" id="hiddenid" />
            <input type="hidden" id="banId" />

        </div>


    </section>
    <div id='myModal' class="modal " tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div id='myModalContent'></div>
            </div>
        </div>

    </div>
    <div class="modal " id="unban" tabindex="-1" role="dialog" aria-labelledby="approverequestTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title float-left font-weight-bold">Unban Attorney</h5>
                    <button class="delete-icon2 float-right" title="Close" data-dismiss="modal"><i class="fas fa-times"></i></button>
                </div>
                <div class="modal-body mt-3" style="text-align: center">
                    <p>This attorney was banned by the LegalCare Administration.</p>
                    <p>Are you sure you unban this account?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="close" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="approve" onclick="UnbanAttorney()">Unban</button>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade" id="Expand-Attorney" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title float-left font-weight-bold">Attorney Information</h5>
                    <button class="delete-icon2 float-right" title="Close" data-dismiss="modal"><i class="fas fa-times"></i></button>
                </div>
                <div class="modal-body mt-4" style="text-align: center">
                    <div class="container-fluid p-0 m-0">
                        <div class="row">
                            <div class="col-md-12">
                                <table id="attorney-info" style="border: 1px solid #ddd" class="table table-striped">
                                    <tr>
                                        <td class="sm-head">Education</td>
                                        <td>
                                            @if (AttorneySingle != null)
                                            {
                                                @AttorneySingle.Attorney_Education

                                            }
                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="sm-head">Years of Experience</td>
                                        <td>
                                            @if (AttorneySingle != null)
                                            {
                                                @AttorneySingle.Attorney_Experience}
                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="sm-head">Date of Birth</td>
                                        <td>
                                            @if (AttorneySingle != null)
                                            {
                                                @AttorneySingle.Attorney_DOB}
                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="sm-head">Law Firm</td>
                                        <td>
                                            @if (AttorneySingle != null)
                                            {
                                                @AttorneySingle.Attorney_Firm}
                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="sm-head">Cases Handled</td>
                                        <td>
                                            @if (AttorneySingle != null)
                                            {@AttorneySingle.Attorney_Cases}
                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="sm-head">Certifications</td>
                                        <td>
                                            @if (AttorneySingle != null)
                                            {@AttorneySingle.Attorney_Certification}
                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="sm-head">Languages</td>
                                        <td>
                                            @if (AttorneySingle != null)
                                            {@AttorneySingle.Attorney_Languages}
                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="sm-head">Role as Attorney</td>
                                        <td id="role">
                                            @if (AttorneySingle != null)
                                            {@AttorneySingle.Attorney_Role}
                                        </td>
                                    </tr>

                                </table>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>


    @section scripts
{
        <script src="~/Scripts/jquery-1.10.2.min.js"></script>
        <script src="~/Scripts/bootstrap.js"></script>
        <script src="~/Scripts/bootstrap.min.js"></script>

        @* Popup Ban *@
        <script type="text/javascript">
            var ConfirmUnban = function (EmployeeId) {

                $("#banId").val(EmployeeId);
                $("#unban").modal('show');

            }

            var UnbanAttorney = function () {



                var empId = $("#banId").val();

                $.ajax({

                    type: "POST",
                    url: "/accounts/ban_attorney",
                    data: { EmployeeId: empId },
                    success: function (result) {

                        $("#unban").modal("hide");
                        $("#ban_" + empId).hide();

                    }

                })

            }
        </script>
        @* Popup Delete *@
        <script type="text/javascript">
            var ConfirmDelete = function (EmployeeId) {

                $("#hiddenid").val(EmployeeId);
                $("#exampleModalCenter").modal('show');

            }

            var DeleteAttorney = function () {



                var empId = $("#hiddenid").val();

                $.ajax({

                    type: "POST",
                    url: "/accounts/delete_attorney",
                    data: { EmployeeId: empId },
                    success: function (result) {

                        $("#exampleModalCenter").modal("hide");
                        $("#row_" + empId).remove();

                    }

                })

            }
        </script>
        @* Popup Attorney Details *@
        <script>
            var TeamDetailPostBackURL = '/accounts/attorney_details';
            $(function () {
                $(".table-button").click(function () {
                    debugger;
                    var $buttonClicked = $(this);
                    var id = $buttonClicked.attr('data-id');
                    var options = { "backdrop": "static", keyboard: true };
                    $.ajax({
                        type: "GET",
                        url: TeamDetailPostBackURL,
                        contentType: "application/json; charset=utf-8",
                        data: { "Id": id },
                        datatype: "json",
                        success: function (data) {
                            debugger;
                            $('#myModalContent').html(data);
                            $('#myModal').modal(options);
                            $('#myModal').modal('show');

                        },
                        error: function () {
                            alert("Dynamic content load failed.");
                        }
                    });
                });
                //$("#closebtn").on('click',function(){
                //    $('#myModal').modal('hide');

                $("#closbtn").click(function () {
                    $('#myModal').modal('hide');
                });
            });

        </script>

    }  